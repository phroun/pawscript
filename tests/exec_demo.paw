# PawScript exec Command Demo
# Demonstrates executing external commands and capturing output

echo "=== exec Command Demo ==="
echo ""

# Example 1: Basic command execution
echo "Example 1: Execute echo command"
exec echo, "Hello from external command!"
echo ""

# Example 2: Capture output in brace expression
echo "Example 2: Capture output in brace"
echo "Current date: {exec date, '+%Y-%m-%d'}"
echo ""

# Example 3: Command with multiple arguments
echo "Example 3: Multiple arguments"
exec ls, "-la", "/tmp"
echo ""

# Example 4: Chain commands with conditionals
echo "Example 4: Conditional execution"
exec echo, "First command" & echo "First succeeded, running second"
echo ""

# Example 5: Fallback on failure
echo "Example 5: Fallback on failure"
exec this_will_fail | echo "Command failed, running fallback"
echo ""

# Example 6: Use output in subsequent commands
echo "Example 6: Using output"
exec echo, "captured output"
echo "The result was: {get_result}"
echo ""

# Example 7A: In a macro

# Example 7B: Store output in macro
echo "Example 7B: Macro with exec"
macro set_var(macro "$1", (set_result $2))
set_var "username", {exec whoami}
echo "Current user: {username}"
echo "Current user: {username}"
echo ""

# Example 8: Complex pipeline
echo "Example 8: Complex pipeline"
exec echo, "processing" &
echo "Stage 1 complete" &
exec echo, "more work" &
echo "Stage 2 complete"
echo ""

# Example 9: Get directory listing
echo "Example 9: Directory listing"
exec ls, "-1", "."
echo ""

# Example 10: Parallel execution with async braces
echo "Example 10: Parallel command execution"
echo "Results: {exec '/bin/bash', '-c', '/bin/sleep 1; echo a'} {exec echo, b} {exec echo, c}"
echo ""

echo "=== Demo Complete ==="
