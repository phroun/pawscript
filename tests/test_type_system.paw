#!/usr/bin/env paw
# Test script for type system improvements

echo "=== Type System Tests ==="
echo ""

# Test 1: get_inferred_type with different value types
echo "Test 1: get_inferred_type"
echo "Type of 42: {get_inferred_type 42}"
echo "Type of 3.14: {get_inferred_type 3.14}"
echo "Type of true: {get_inferred_type true}"
echo "Type of false: {get_inferred_type false}"
echo "Type of \"hello\": {get_inferred_type "hello"}"
echo "Type of myvar (symbol): {get_inferred_type myvar}"
echo "Type of (block): {get_inferred_type (some code)}"
echo ""

# Test 2: get_type with variables
echo "Test 2: get_type with variables"

num: 42
echo "Type of num variable: {get_type num}"

str: "hello"
echo "Type of str variable: {get_type str}"

bool_val: true
echo "Type of bool_val variable: {get_type bool_val}"

sym: myidentifier
echo "Type of sym variable (symbol): {get_type sym}"

blk: (code block)
echo "Type of blk variable (block): {get_type blk}"

macro: {macro (echo "Hello!")}
echo "Type of macro variable (macro): {get_type macro}"

cmd: {command_ref "echo"}
echo "Type of cmd variable (command): {get_type cmd}"

echo ""

# Test 3: Undefined variable
echo "Test 3: Undefined variable"
echo "Type of undefined_var: {get_type undefined_var}"
echo "(Should print 'undefined' above)"
echo ""

# Test 4: Symbol vs string distinction
echo "Test 4: Symbol vs String distinction"
echo "Symbol: {get_inferred_type identifier} (should be 'symbol')"
echo "String: {get_inferred_type \"identifier\"} (should be 'string')"
echo ""

# Test 5: Using symbols in commands
echo "Test 5: Symbols work in normal commands"
x: foo
y: "foo"
echo "x (symbol) = ~x"
echo "y (string) = ~y"
echo "x type: {get_type x}"
echo "y type: {get_type y}"
echo ""

# Test 6: nil handling
echo "Test 6: nil handling"
echo "Type of nil: {get_inferred_type nil}"
null_var: nil
echo "Type of null_var: {get_type null_var}"
echo ""

echo "=== All Tests Complete ==="
