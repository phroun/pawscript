#!/usr/bin/env paw
# Test script for type system improvements

echo "=== Type System Tests ==="
echo ""

# Test 1: infer with different value types
echo "Test 1: infer"
echo "Type of 42: {infer 42}"
echo "Type of 3.14: {infer 3.14}"
echo "Type of true: {infer true}"
echo "Type of false: {infer false}"
echo "Type of \"hello\": {infer "hello"}"
echo "Type of myvar (symbol): {infer myvar}"
echo "Type of (block): {infer (some code)}"
echo ""

# Test 2: type with variables
echo "Test 2: type with variables"

num: 42
echo "Type of num variable: {type num}"

str: "hello"
echo "Type of str variable: {type str}"

bool_val: true
echo "Type of bool_val variable: {type bool_val}"

sym: myidentifier
echo "Type of sym variable (symbol): {type sym}"

blk: (code block)
echo "Type of blk variable (block): {type blk}"

macro: {macro (echo "Hello!")}
echo "Type of macro variable (macro): {type macro}"

cmd: {command_ref "echo"}
echo "Type of cmd variable (command): {type cmd}"

echo ""

# Test 3: Undefined variable
echo "Test 3: Undefined variable"
echo "Type of undefined_var: {type undefined_var}"
echo "(Should print 'undefined' above)"
echo ""

# Test 4: Symbol vs string distinction
echo "Test 4: Symbol vs String distinction"
echo "Symbol: {infer identifier} (should be 'symbol')"
echo "String: {infer \"identifier\"} (should be 'string')"
echo ""

# Test 5: Using symbols in commands
echo "Test 5: Symbols work in normal commands"
x: foo
y: "foo"
echo "x (symbol) = ~x"
echo "y (string) = ~y"
echo "x type: {type x}"
echo "y type: {type y}"
echo ""

# Test 6: nil handling
echo "Test 6: nil handling"
echo "Type of nil: {infer nil}"
null_var: nil
echo "Type of null_var: {type null_var}"
echo ""

echo "=== All Tests Complete ==="
